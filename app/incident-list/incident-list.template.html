<script src="../../../angular-phonecat/app/phone-list/phone-list.component.js"></script>
<div class="row">
    <div class="col-md-6">
        <h3>
            Incidents by state {{$ctrl.newTest}}
        </h3>
        <canvas
                id="doughnut"
                class="chart chart-doughnut">
        </canvas>
    </div>
    <div class="col-md-6">
        <h3>
            Incidents over time
        </h3>
        <canvas id="line" class="chart chart-line" chart-data="$ctrl.dataL"
                chart-labels="$ctrl.labelsL" chart-series="$ctrl.seriesL" chart-options="$ctrl.optionsL"
                chart-dataset-override="$ctrl.datasetOverrideL">
        </canvas
    </div>
</div>
<div class="row">
    <table st-table="displayedCollection" st-safe-src="$ctrl.incidents" class="table table-striped">
        <thead>
        <tr>
            <th>
                <div class="form-group">
                    <label>Search:</label>
                    <input type="text" ng-model="$ctrl.query" class="form-control">
                </div>
            </th>
            <th>

            </th>
            <th>
                <div class="form-group">
                    <label>State</label>
                    <select st-search="state" class="form-control">
                        <option value="">All</option>
                        <option value="7">{{"7" | getState}}</option>
                        <option value="3">{{"3" | getState}}</option>
                        <option value="2">{{"2" | getState}}</option>
                    </select>
                </div>
            </th>
            <th>
                <div class="form-group">
                    <label>Urgency</label>
                    <select st-search="urgency" class="form-control">
                        <option value="">All</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                    </select>
                </div>
            </th>
        </tr>
        <tr>
            <th st-sort="number">Incident Number</th>
            <th st-sort="urgency">Urgency</th>
            <th st-sort="caller">Caller</th>
            <th st-sort="opened_at">Opened</th>
            <th st-sort="state">State</th>
        </tr>
        </thead>
        <tbody>
        <tr st-select-row="row" ng-repeat="incident in displayedCollection | filter:$ctrl.query">
            <td><a href="#!/incident/{{incident.number}}">{{incident.number}}</a></td>
            <td>{{incident.urgency}}</td>
            <td>{{incident.caller}}</td>
            <td>{{incident.opened_at | date}}</td>
            <td>{{incident.state | getState}}</td>
        </tr>
        </tbody>
    </table>
</div>

<script type="text/ng-template" id="details.html">
    <div class="panel panel-default">
        <div class="panel-body">
            <h3>Szczegóły</h3>
            <div class="list-group">
                <a href="#" class="list-group-item active">
                    {{mountain.mountain}}
                </a>
                <a href="#" class="list-group-item">Wysokość: <b>{{mountain.metres}}</b></a>
                <a href="#" class="list-group-item">Państwo: <b>{{mountain.country}}</b></a>
            </div>
            <a href="#/mountain" class="btn btn-default">Powrót do listy</a>
            <a href="" ng-click="delete(mountain.id)" class="btn btn-danger">Usuń {{mountain.mountain}}</a>
        </div>
    </div>
</script>
